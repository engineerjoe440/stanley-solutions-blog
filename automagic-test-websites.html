<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>  Automagic Test Websites | Stanley Solutions Blog
</title>
  <link rel="canonical" href="https://blog.stanleysolutionsnw.com/automagic-test-websites.html">


  <link rel="stylesheet" href="https://bootswatch.com/4/darkly/bootstrap.css">
  <link rel="stylesheet" href="https://blog.stanleysolutionsnw.com/theme/css/fontawesome.min.css">
  <link rel="stylesheet" href="https://blog.stanleysolutionsnw.com/theme/css/pygments/monokai.min.css">
  <link rel="stylesheet" href="https://blog.stanleysolutionsnw.com/theme/css/theme.css">
  <link rel="stylesheet" href="https://blog.stanleysolutionsnw.com/custom.css">
  <link rel="stylesheet" href="https://files.stork-search.net/dark.css">
  <script src="https://files.stork-search.net/releases/v1.6.0/stork.js"></script>

  <link rel="alternate" type="application/atom+xml" title="Full Atom Feed"
        href="https://blog.stanleysolutionsnw.com/feeds/all.atom.xml">
  <link rel="alternate" type="application/rss+xml" title="Full RSS Feed"
        href="https://blog.stanleysolutionsnw.com/feeds/all.rss.xml">  <link rel="alternate" type="application/atom+xml" title="Categories Atom Feed"
        href="https://blog.stanleysolutionsnw.com/feeds/youth.atom.xml">  <link rel="alternate" type="application/rss+xml" title="Categories RSS Feed"
        href="https://blog.stanleysolutionsnw.com/feeds/youth.rss.xml">  
  <meta name="description" content="Over the last few months, I've been working with a 4-H member to develop and build a smart, simple, and elegant web-application for 4-H members to upload photos they take while participating in a youth conference. Since I'm working with a 4-H member to develop the website, everything needs to have a focus on education, and I need to spend as little time as possible fussing with the infrastructure side of things, since that's not what we're focusing on. I decided that we should make a system using my self-hosted GitLab and Jenkins instances to automagically deploy changes so that the youth doesn't have to learn how that's done, and fight with the server all the time!">


</head>

<body>
  <header class="header">
    <div class="container">
<div class="row">
    <div class="col-sm-4">
      <a href="https://blog.stanleysolutionsnw.com/">
        <img class="img-fluid rounded" src=https://blog.stanleysolutionsnw.com/logo.png alt="Stanley Solutions Blog">
      </a>
    </div>
  <div class="col-sm-8">
    <h1 class="title"><a href="https://blog.stanleysolutionsnw.com/">Stanley Solutions Blog</a></h1>
      <p class="text-muted">engineering and creativity - all under one hat</p>
      <ul class="list-inline">
          <li class="list-inline-item"><a href="https://stanleysolutionsnw.com" target="_blank">Stanley Solutions Website</a></li>
          <li class="list-inline-item"><a href="https://electricpy.readthedocs.io/en/latest/" target="_blank">ElectricPy</a></li>
          <li class="list-inline-item"><a href="https://engineerjoe440.github.io/selprotopy" target="_blank">SELProtoPy</a></li>
          <li class="list-inline-item"><a href="https://engineerjoe440.github.io/pycev" target="_blank">PyCEV</a></li>
          <li class="list-inline-item"><a href="https://gitlab.stanleysolutionsnw.com/krnc/usb-manager" target="_blank">KRNC Barn Manager</a></li>
          <li class="list-inline-item"><a href="https://github.com/engineerjoe440/schemdraw-markdown" target="_blank">Schemdraw-Markdown</a></li>
            <li class=" list-inline-item text-muted">|</li>
          <li class="list-inline-item"><a class="fas fa-comments" href="https://matrix.to/#/@engineerjoe440:stanleysolutionsnw.com" target="_blank"></a></li>
          <li class="list-inline-item"><a class="fab fa-github" href="https://github.com/engineerjoe440/" target="_blank"></a></li>
          <li class="list-inline-item"><a class="fab fa-gitlab" href="https://gitlab.stanleysolutionsnw.com/engineerjoe440" target="_blank"></a></li>
          <li class="list-inline-item"><a class="fas fa-coffee" href="https://gitea.stanleysolutionsnw.com/engineerjoe440" target="_blank"></a></li>
          <li class="list-inline-item"><a class="fas fa-calendar" href="https://calendar.google.com/calendar/embed?src=engineerjoe440%40gmail.com&ctz=America%2FLos_Angeles" target="_blank"></a></li>
          <li class="list-inline-item"><a class="fas fa-rss" href="https://blog.stanleysolutionsnw.com/feeds/all.rss.xml" target="_blank"></a></li>
      </ul>
    <div class="stork-wrapper-dark">
      <input data-stork="sitesearch" class="stork-input" placeholder="search"/>
      <div data-stork="sitesearch-output" class="stork-output"></div>
    </div>
    <script>
      stork.register("sitesearch", "https://blog.stanleysolutionsnw.com/search-index.st");
    </script>
  </div>
</div>    </div>
  </header>

  <div class="main">
    <div class="container">
      <h1>  Automagic Test Websites
</h1>
      <hr>
  <main>
    <article class="article">
      <header>
        <ul class="list-inline">
          <li class="list-inline-item text-muted" title="2022-03-22T18:32:00-07:00">
            <i class="fas fa-clock"></i>
            Tue 22 March 2022
          </li>
          <li class="list-inline-item">
            <i class="fas fa-folder-open"></i>
            <a href="https://blog.stanleysolutionsnw.com/category/youth.html">Youth</a>
          </li>
            <li class="list-inline-item">
              <i class="fas fa-tag"></i>
                <a href="https://blog.stanleysolutionsnw.com/tag/youth.html">#Youth</a>,                 <a href="https://blog.stanleysolutionsnw.com/tag/4-h.html">#4-H</a>,                 <a href="https://blog.stanleysolutionsnw.com/tag/education.html">#Education</a>,                 <a href="https://blog.stanleysolutionsnw.com/tag/jenkins.html">#Jenkins</a>,                 <a href="https://blog.stanleysolutionsnw.com/tag/nginx.html">#NGINX</a>,                 <a href="https://blog.stanleysolutionsnw.com/tag/docker.html">#Docker</a>,                 <a href="https://blog.stanleysolutionsnw.com/tag/docker-compose.html">#Docker-Compose</a>,                 <a href="https://blog.stanleysolutionsnw.com/tag/development.html">#Development</a>,                 <a href="https://blog.stanleysolutionsnw.com/tag/ci.html">#CI</a>,                 <a href="https://blog.stanleysolutionsnw.com/tag/ci-cd.html">#CI-CD</a>,                 <a href="https://blog.stanleysolutionsnw.com/tag/self-hosted.html">#Self-Hosted</a>,                 <a href="https://blog.stanleysolutionsnw.com/tag/gitlab.html">#Gitlab</a>            </li>
        </ul>
      </header>
      <div class="content">
        <p>As you may already know, I've been working on some fun and interesting stuff with some 4-H members over the last few months. We're developing a
<a href="/reactjs-python-pictures-and-4h.html">Python-based photo-upload-app</a> to allow 4-H youth (delegates) at a youth conference upload photos securely
to participate in competitions during the conference, and to share photos for the end-of-conference-slideshow.</p>
<p>Anyway, I'm not here to talk about the app; I'll be doing plenty more of that, I'm sure.</p>
<p>What I am here to talk about is how I'm making it automatically deploy the application for
<a href="https://gitlab.stanleysolutionsnw.com/idaho4h/4HPhotoUploader">each development branch in my GitLab instance</a> automatically with a little Jenkins magic.
You see, since I have a personal Jenkins instance set up to work with my GitLab, it's able to authenticate and pull all of the source-code from any branch
in whichever repository I configure. Better yet, I can make it automatically look for changes to any-and-all branches, and automatically run builds when
those branches change.</p>
<p>What I've just described is nothing new to those who work in CI/CD (Continuous Integration/Continuous Deployment) systems, but it is valuable and, I think,
novel in this context. I'm using this automated build system to abstract the complexity of deploying a containerized application so that I can focus on
development with a youth member, and focus on programming, not deploying servers. Using Jenkins, in this way, the 4-H'er that I'm working with can write
his own code in GitLab's built in editor, so he doesn't need to learn <code>git</code> and he can commit his work, and watch it automatically deploy for him!</p>
<h2>How I'm Making the Magic Happen with Jenkins</h2>
<p>So... Like I said, Jenkins is doing most of the heavy lifting here. It's looking for changes, then running builds when those changes appear; but Jenkins
isn't the <em>hosting server</em>, itself, it's just the CI server. In fact, I'm using a Linode server which is configured and provisioned as a Jenkins agent (as
far as my Jenkins instance is concerned) that has NGINX, Python, Docker, and docker-compose installed to do the heavy lifting. This way, I can make it all
come together quite nicely.</p>
<p>The pipeline, in a nutshell, looks something like this:</p>
<p><img src="https://blog.stanleysolutionsnw.com/images/jenkins_4h_deployment.png" style="width: 100%" alt="Jenkins Pipeline"></p>
<p>So let's walk through those stages...</p>
<h4>1) Prep</h4>
<p>Pretty much what it sounds like. Pull down the repo source, do any other setup that's necessary.</p>
<p>Notably though, this stage actually URL-ifies the branch name. In other words, it sanitizes the branch-name to make it appropriate for a unique
subdomain-name. This is kinda critical. Each branch will end up getting its own subdomain under the <code>idaho4h.com</code> domain that's filed for this server.
The process is pretty simple, really, just replace whitespace and slashes with dashes so that it's a "legal" subdomain.</p>
<p>Here's the function I use to do it:</p>
<div class="highlight"><pre><span></span><code><span class="kt">def</span><span class="w"> </span><span class="nf">urlifyBranchName</span><span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="c1">// &quot;Sanitize&quot; the Branch Name as a Sub-Domain Name</span>
<span class="w">    </span><span class="c1">// i.e., https://&lt;branch-name&gt;.idaho4h.com/</span>
<span class="w">    </span><span class="n">env</span><span class="o">.</span><span class="na">DOCKER_BRANCH_NAME</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BRANCH_NAME</span><span class="o">.</span><span class="na">replaceAll</span><span class="o">(</span><span class="s2">&quot; &quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;-&quot;</span><span class="o">).</span><span class="na">replaceAll</span><span class="o">(</span><span class="s2">&quot;/&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;-&quot;</span><span class="o">)</span>
<span class="w">    </span><span class="n">echo</span><span class="w"> </span><span class="n">env</span><span class="o">.</span><span class="na">DOCKER_BRANCH_NAME</span>
<span class="o">}</span>
</code></pre></div>

<h4>2) Test Python</h4>
<p>This one's pretty simple. Since Python is holding up the backend, I want to run some tests. This is pretty much unit-test only (no functional or
integration tests, here - yet), but it allows us to check some of the simple sanitizer functions we're going to count on for the service.</p>
<p>Adittedly, I had a bit of trouble with some of the virtual-environment stuff, and haven't gotten back around to fixing that yet, so for now just ignore
the title of the function. The execution is pretty simple. pip-install the requirements we need, then run <code>pytest</code>. Voila!</p>
<div class="highlight"><pre><span></span><code><span class="kt">def</span><span class="w"> </span><span class="nf">runPythonTestsInVirtualEnv</span><span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">stage</span><span class="o">(</span><span class="s2">&quot;Test Python&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="c1">// Install Requirements</span>
<span class="w">        </span><span class="n">sh</span><span class="w"> </span><span class="s2">&quot;&quot;&quot;python3 -m pip install -r ${WORKSPACE}/${requirementsFile}&quot;&quot;&quot;</span>

<span class="w">        </span><span class="c1">// Run `pytest`</span>
<span class="w">        </span><span class="n">sh</span><span class="w"> </span><span class="s2">&quot;pytest&quot;</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>
</code></pre></div>

<h4>3) Build the Frontend</h4>
<p>This whole project relies on a Python backend, and a React.js frontend. I need to get around to documenting this whole intertie a little better, but for
now, just know that there are two root folders. One for the frontend, the other for the backend. When building the whole thing, we build and export the
frontend and shove it into the static folder of the backend. Python can then serve all of the javascript, html, and css files from there. Pretty simple,
really (took a while to figure out, though).</p>
<p>What this stage does can be summarized as follows: install npm resources, fix what audit warnings can be handled, build the artifacts. Fairly simple!
Again though, I'll note that there is some prior setup required to make the whole npm ecosystem "happy" with the structure of the frontend folder.</p>
<div class="highlight"><pre><span></span><code><span class="kt">def</span><span class="w"> </span><span class="nf">buildReactFrontend</span><span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">stage</span><span class="o">(</span><span class="s2">&quot;React Frontend&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">dir</span><span class="o">(</span><span class="s2">&quot;frontend&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">            </span><span class="c1">// Ensure all Packages are Installed</span>
<span class="w">            </span><span class="n">sh</span><span class="w"> </span><span class="s2">&quot;npm install&quot;</span>

<span class="w">            </span><span class="c1">// Attempt to Resolve Reported Vulnerabilities</span>
<span class="w">            </span><span class="n">sh</span><span class="w"> </span><span class="s2">&quot;npm audit fix || true&quot;</span><span class="w"> </span><span class="c1">// Don&#39;t fail on normal warning</span>

<span class="w">            </span><span class="c1">// Use the Build Tooling</span>
<span class="w">            </span><span class="n">sh</span><span class="w"> </span><span class="s2">&quot;npm run build&quot;</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>
</code></pre></div>

<h4>4) Dockerize</h4>
<p>This whole thing runs in a little docker container. Pretty simple!</p>
<div class="highlight"><pre><span></span><code><span class="c"># Dockerfile for Idaho 4-H Photo Upload Service</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">python:3.9</span>

<span class="k">WORKDIR</span><span class="w"> </span><span class="s">/server</span>

<span class="k">COPY</span><span class="w"> </span>./backend<span class="w"> </span>/server

<span class="k">RUN</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--no-cache-dir<span class="w"> </span>--upgrade<span class="w"> </span>-r<span class="w"> </span>/server/requirements.txt

<span class="c"># Run Server on localhost:8383 so Nginx can Hit it without Direct Extern. Access</span>
<span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;uvicorn&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;main:app&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;--host&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;--port&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;80&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;--log-config&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;log_conf.yml&quot;</span><span class="p">]</span>
</code></pre></div>

<p>Basically, we just dockerize the Python application after pulling all of its backend source contents into one spot. This whole container is then built and
deployed with a little docker-compose magic:</p>
<div class="highlight"><pre><span></span><code><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3.9&quot;</span>

<span class="c1"># Web-UI is Defined by Local &quot;Dockerfile&quot;, Must Be Rebuilt Each Time</span>
<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">webui</span><span class="p">:</span>
<span class="w">    </span><span class="nt">build</span><span class="p">:</span>
<span class="w">      </span><span class="nt">context</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./</span>
<span class="w">      </span><span class="nt">dockerfile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./Dockerfile</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$NEXT_AVAIL_APP_PORT:80</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$RESTART_POLICY</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LYCHEE_API_USER</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LYCHEE_API_TOKEN</span>
</code></pre></div>

<p>Notice the use of a few things, we've got several environment variables in that docker-compose file:</p>
<ul>
<li><code>NEXT_AVAIL_APP_PORT</code> Defines the port that should be used on the host system such that NGINX may pass it traffic.</li>
<li><code>RESTART_POLICY</code> Defines whether or not the container should restart automatically, this is only set for the <code>main</code> and <code>develop</code> branches.</li>
<li><code>LYCHEE_API_USER</code> Calls out that a local environment variable should be pulled from Jenkins to declare the username to use for Lychee access.</li>
<li><code>LYCHEE_API_TOKEN</code> As for the username, calls out reference to what Jenkins provides as the password (token) for the API access to Lychee.</li>
</ul>
<p>This, of course, is all leveraged in Jenkins:</p>
<div class="highlight"><pre><span></span><code><span class="kt">def</span><span class="w"> </span><span class="nf">buildDockerContainer</span><span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">stage</span><span class="o">(</span><span class="s2">&quot;Docker Container&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>

<span class="w">        </span><span class="c1">// Check for &quot;Default&quot; Conditions</span>
<span class="w">        </span><span class="c1">// MAIN and DEVELOP Branches Should Have Consistent Ports</span>
<span class="w">        </span><span class="c1">// Their Containers Should Also Restart Automatically</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">(</span><span class="n">env</span><span class="o">.</span><span class="na">DOCKER_BRANCH_NAME</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;main&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">            </span><span class="n">env</span><span class="o">.</span><span class="na">NEXT_AVAIL_APP_PORT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;8000&quot;</span>
<span class="w">            </span><span class="n">env</span><span class="o">.</span><span class="na">RESTART_POLICY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;always&quot;</span>
<span class="w">        </span><span class="o">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="o">(</span><span class="n">env</span><span class="o">.</span><span class="na">DOCKER_BRANCH_NAME</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;develop&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">            </span><span class="n">env</span><span class="o">.</span><span class="na">NEXT_AVAIL_APP_PORT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;8001&quot;</span>
<span class="w">            </span><span class="n">env</span><span class="o">.</span><span class="na">RESTART_POLICY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;always&quot;</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">        </span><span class="n">echo</span><span class="w"> </span><span class="n">env</span><span class="o">.</span><span class="na">NEXT_AVAIL_APP_PORT</span>

<span class="w">        </span><span class="c1">// Provide credentials to the docker-compose script so that</span>
<span class="w">        </span><span class="c1">// container will reference the Lychee API credentials.</span>
<span class="w">        </span><span class="n">withCredentials</span><span class="o">([</span>
<span class="w">            </span><span class="n">usernamePassword</span><span class="o">(</span><span class="nl">credentialsId:</span><span class="w"> </span><span class="s1">&#39;idaho4hapi&#39;</span><span class="o">,</span>
<span class="w">            </span><span class="nl">usernameVariable:</span><span class="w"> </span><span class="s1">&#39;LYCHEE_API_USER&#39;</span><span class="o">,</span>
<span class="w">            </span><span class="nl">passwordVariable:</span><span class="w"> </span><span class="s1">&#39;LYCHEE_API_TOKEN&#39;</span><span class="o">)</span>
<span class="w">        </span><span class="o">])</span><span class="w"> </span><span class="o">{</span>
<span class="w">            </span><span class="c1">// Build the Container - Using the Branch-Name as Env Var</span>
<span class="w">            </span><span class="n">sh</span><span class="w"> </span><span class="s2">&quot;docker-compose up -d --build&quot;</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>
</code></pre></div>

<p>The Jenkins scripting is responsible for doing a few things. First and foremost, if the branch is one of the "static" branches (<code>main</code> or <code>develop</code>),
it's given a static port (the same as the <em>last</em> time this branch was deployed). If it's not one of the key branches, then it's given the next available
port, one that comes from a file on the host OS and is incremented each time there's a new deployment. Admittedly, this is a bit intense, and it makes
the port move a little more than it probably needs to, but it does ensure somewhat robust port management.</p>
<p>At the same time the port number is being decided, the restart-policy may be updated. You see, the default restart policy is <code>"no"</code>, indicating that the
container should NOT restart if it were to fail, or the host OS were to restart; however, that's not the behavior we want for the "static" branches. They
should restart whenever possible! And that's exactly what the <code>RESTART_POLICY</code> environmental override does. It updates the restart policy fro <code>"no"</code> to
<code>"always"</code> for the static branches.</p>
<p>The next piece of the script is to run the docker-compose command, but notice how that's done in the context of a <code>withCredentials</code> block. This allows
Jenkins to provision the Lyche credentials to environmental variables that docker-compose can reference and inject into the container at build-time. This
gives us the ability to launch the container with the appropriate credentials, while securing them in Jenkins and avoiding the need to have them stored as
a static file either in GitLab, or on the server, itself. Sweet!</p>
<h4>5) Deploy in NGINX</h4>
<p>Who likes typing in the specific port for the web-service they want to use... or better yet, besides the nerdier of us who know about it... who would even think of that?</p>
<p>That's exactly where NGINX comes in in this case. NGINX does all of the proxying for me on this server. What's a proxy? you ask. Well, according to
the Merriam-Webster dictionary:</p>
<blockquote>
<p>proxy (noun)</p>
<p>\ ˈpräk-sē  \</p>
<p>the agency, function, or office of a deputy who acts as a substitute for another</p>
</blockquote>
<p>In my case, NGINX <em>proxies</em> or represents each of the various services and, in turn, passes web requests to them. So for each new branch, I need to create a new proxy for the associated, url-ified branch name to pass to the specific application port that the container is listening on.</p>
<p>That's done pretty simply by running a little Python script to generate the NGINX configuration, then we restart NGINX to accept the new config.</p>
<div class="highlight"><pre><span></span><code><span class="kt">def</span><span class="w"> </span><span class="nf">deployContainerInNginx</span><span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">stage</span><span class="o">(</span><span class="s2">&quot;Deploy in NGINX&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="c1">// Generate the NGINX Config File</span>
<span class="w">        </span><span class="n">sh</span><span class="w"> </span><span class="s2">&quot;python3 ./writeNginxConfig.py&quot;</span>

<span class="w">        </span><span class="c1">// Restart NGINX To Apply Config</span>
<span class="w">        </span><span class="n">sh</span><span class="w"> </span><span class="s2">&quot;sudo /usr/bin/systemctl restart nginx&quot;</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>
</code></pre></div>

<p>That little Python script helps us out too, it basically sucks in a few of the environmental variables to determine how the configuration should be written
(or if it should be written at all - it's not written for <code>main</code> or <code>develop</code> branches). After slurping up those environmental variables, it writes out a
new file with the configuration into NGINX's sites-enabled directory.</p>
<div class="highlight"><pre><span></span><code><span class="c1">################################################################################</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">deployNginx.py</span>

<span class="sd">A deployment helper script to automate the addition of new NGINX configuration</span>
<span class="sd">files in the /etc/nginx/sites-enabled directory.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="c1">################################################################################</span>

<span class="kn">import</span> <span class="nn">os</span>

<span class="n">PORT_VAR</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;NEXT_AVAIL_APP_PORT&quot;</span><span class="p">)</span>
<span class="n">BRANCH_VAR</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DOCKER_BRANCH_NAME&quot;</span><span class="p">)</span>

<span class="n">NGINX_CONFIG</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2"># </span><span class="si">{BRANCH_NAME}</span><span class="s2"> Configuration</span>
<span class="s2">server {{</span>
<span class="s2">    listen 80;</span>
<span class="s2">    server_name </span><span class="si">{BRANCH_NAME}</span><span class="s2">.idaho4h.com www.</span><span class="si">{BRANCH_NAME}</span><span class="s2">.idaho4h.com;</span>

<span class="s2">    access_log  /home/jenkins/nginx-logs/</span><span class="si">{BRANCH_NAME}</span><span class="s2">.log;</span>

<span class="s2">    location / {{</span>
<span class="s2">        proxy_pass http://127.0.0.1:</span><span class="si">{CONTAINER_PORT}</span><span class="s2">;</span>
<span class="s2">        proxy_set_header Host $http_host;</span>
<span class="s2">        proxy_set_header Upgrade $http_upgrade;</span>
<span class="s2">        proxy_set_header Connection &quot;upgrade&quot;;</span>
<span class="s2">        proxy_set_header X-Real-IP $remote_addr;</span>
<span class="s2">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span>
<span class="s2">        proxy_set_header X-Scheme $scheme;</span>

<span class="s2">        client_max_body_size 0;</span>
<span class="s2">    }}</span>

<span class="s2">}}</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Branch: &quot;</span><span class="p">,</span> <span class="n">BRANCH_VAR</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Port: &quot;</span><span class="p">,</span> <span class="n">PORT_VAR</span><span class="p">)</span>
    <span class="c1"># Validate that this is not one of the &quot;special&quot; cases</span>
    <span class="k">if</span> <span class="n">BRANCH_VAR</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;main&#39;</span><span class="p">,</span> <span class="s1">&#39;develop&#39;</span><span class="p">]:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Skipping NGINX Redeploy&quot;</span><span class="p">)</span>
        <span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># Stop - Don&#39;t Change Port Number</span>
    <span class="c1"># Write the New Config File</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;/etc/nginx/sites-enabled&#39;</span><span class="p">,</span> <span class="n">BRANCH_VAR</span><span class="p">),</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
            <span class="c1"># Fill with the Cleaned Branch Variable and the Container&#39;s Port</span>
            <span class="n">NGINX_CONFIG</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">BRANCH_NAME</span><span class="o">=</span><span class="n">BRANCH_VAR</span><span class="p">,</span>
                <span class="n">CONTAINER_PORT</span><span class="o">=</span><span class="n">PORT_VAR</span>
            <span class="p">)</span>
        <span class="p">)</span>

<span class="c1"># END</span>
</code></pre></div>

<h4>6) Wrap Up</h4>
<p>Pretty much exactly what it sounds like, this final stage just puts things "away" after the fact. The primary purpose of this operation is just to store
the configuration for the TCP port to use for Docker the next time around. It's all simplified with the use of a Python file.</p>
<div class="highlight"><pre><span></span><code><span class="c1">################################################################################</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">updatePort.py</span>

<span class="sd">A deployment helper script to automate the &quot;bumping&quot; of the container port file</span>
<span class="sd">to coordinate cross-branch container deployments.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="c1">################################################################################</span>

<span class="kn">import</span> <span class="nn">os</span>

<span class="n">PORT_VAR</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;NEXT_AVAIL_APP_PORT&quot;</span><span class="p">)</span>
<span class="n">BRANCH_VAR</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DOCKER_BRANCH_NAME&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Branch: &quot;</span><span class="p">,</span> <span class="n">BRANCH_VAR</span><span class="p">)</span>
    <span class="c1"># Validate that this is not one of the &quot;special&quot; cases</span>
    <span class="k">if</span> <span class="n">BRANCH_VAR</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;main&#39;</span><span class="p">,</span> <span class="s1">&#39;develop&#39;</span><span class="p">]:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Skipping Automatic Port Update&quot;</span><span class="p">)</span>
        <span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># Stop - Don&#39;t Change Port Number</span>

    <span class="c1"># Run Main Operation</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;/home/jenkins/app-ports&quot;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">content</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

    <span class="c1"># Modify the Port Number</span>
    <span class="n">current_port</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">PORT_VAR</span><span class="p">)</span>
    <span class="n">next_port</span> <span class="o">=</span> <span class="n">current_port</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">current_port</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">next_port</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Current Deployment Port: &quot;</span><span class="p">,</span> <span class="n">current_port</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Next Deployment Port: &quot;</span><span class="p">,</span> <span class="n">next_port</span><span class="p">)</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;/home/jenkins/app-ports&quot;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>

<span class="c1"># END</span>
</code></pre></div>

<h2>Recapping</h2>
<p>This whole automated flow allows me to keep builds going auto-magically so that I can work with a 4-H youth member to develop this simple little
photo-upload app without having to go too deep into the weeds with all of the development nightmares, we can focus on the basics of the code, and then let
the automated system keep it all moving along for us.</p>
<details>
  <summary>Click to expand all the Jenkinsfile goodness!</summary>

<div class="highlight"><pre><span></span><code><span class="cm">/*******************************************************************************</span>
<span class="cm"> *</span>
<span class="cm"> * Jenkinsfile for Idaho 4-H Delegate Photo Upload Interface</span>
<span class="cm"> *</span>
<span class="cm"> * 2021 - Stanley Solutions</span>
<span class="cm"> * Joe Stanley</span>
<span class="cm"> ******************************************************************************/</span>

<span class="c1">// Global Variables</span>
<span class="c1">// In Groovy, global variables are not given a type or proceeded by def</span>
<span class="n">requirementsFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;backend/requirements.txt&quot;</span>

<span class="n">properties</span><span class="o">([[</span><span class="n">$class</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;GitLabConnectionProperty&#39;</span><span class="o">,</span><span class="w"> </span><span class="nl">gitLabConnection:</span><span class="w"> </span><span class="s1">&#39;StanleySolutions GitLab&#39;</span><span class="o">]])</span>

<span class="n">node</span><span class="w"> </span><span class="o">(</span><span class="s1">&#39;4happserver&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>

<span class="w">    </span><span class="c1">// Set Up Environment Variables</span>
<span class="w">    </span><span class="n">parameters</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">string</span><span class="o">(</span><span class="nl">name:</span><span class="w"> </span><span class="s1">&#39;DOCKER_BRANCH_NAME&#39;</span><span class="o">,</span><span class="w"> </span><span class="nl">defaultValue:</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="o">)</span>
<span class="w">        </span><span class="n">string</span><span class="o">(</span><span class="nl">name:</span><span class="w"> </span><span class="s1">&#39;NEXT_AVAIL_APP_PORT&#39;</span><span class="o">,</span><span class="w"> </span><span class="nl">defaultValue:</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="o">)</span>
<span class="w">        </span><span class="n">string</span><span class="o">(</span><span class="nl">name:</span><span class="w"> </span><span class="s1">&#39;RESTART_POLICY&#39;</span><span class="o">,</span><span class="w"> </span><span class="nl">defaultValue:</span><span class="w"> </span><span class="s1">&#39;no&#39;</span><span class="o">)</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">    </span><span class="c1">// Clean Workspace</span>
<span class="w">    </span><span class="n">cleanWs</span><span class="o">()</span>

<span class="w">    </span><span class="n">stage</span><span class="o">(</span><span class="s1">&#39;Prep&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>

<span class="w">        </span><span class="c1">// Check Out Source Code</span>
<span class="w">        </span><span class="n">checkout</span><span class="w"> </span><span class="n">scm</span>

<span class="w">        </span><span class="c1">// Load the Next Available Port as an Env Var</span>
<span class="w">        </span><span class="n">load</span><span class="w"> </span><span class="s2">&quot;/home/jenkins/app-ports&quot;</span>

<span class="w">        </span><span class="c1">// Clean Branch Name</span>
<span class="w">        </span><span class="n">urlifyBranchName</span><span class="o">()</span>
<span class="w">    </span><span class="o">}</span>

<span class="w">    </span><span class="c1">// Publish Status of All Contained Stages</span>
<span class="w">    </span><span class="n">gitlabCommitStatus</span><span class="w"> </span><span class="o">{</span>

<span class="w">        </span><span class="c1">// Test Backend</span>
<span class="w">        </span><span class="n">runPythonTestsInVirtualEnv</span><span class="o">()</span>

<span class="w">        </span><span class="c1">// Build Frontend</span>
<span class="w">        </span><span class="n">buildReactFrontend</span><span class="o">()</span>

<span class="w">        </span><span class="c1">// Stand Up Container</span>
<span class="w">        </span><span class="n">buildDockerContainer</span><span class="o">()</span>

<span class="w">        </span><span class="c1">// Deploy Container</span>
<span class="w">        </span><span class="n">deployContainerInNginx</span><span class="o">()</span>

<span class="w">        </span><span class="n">stage</span><span class="o">(</span><span class="s2">&quot;Wrap Up&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">            </span><span class="c1">// Update Port for Next Build</span>
<span class="w">            </span><span class="n">sh</span><span class="w"> </span><span class="s2">&quot;python3 ./updatePort.py&quot;</span>
<span class="w">        </span><span class="o">}</span>

<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>


<span class="kt">def</span><span class="w"> </span><span class="nf">urlifyBranchName</span><span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="c1">// &quot;Sanitize&quot; the Branch Name as a Sub-Domain Name</span>
<span class="w">    </span><span class="c1">// i.e., https://&lt;branch-name&gt;.idaho4h.com/</span>
<span class="w">    </span><span class="n">env</span><span class="o">.</span><span class="na">DOCKER_BRANCH_NAME</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BRANCH_NAME</span><span class="o">.</span><span class="na">replaceAll</span><span class="o">(</span><span class="s2">&quot; &quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;-&quot;</span><span class="o">).</span><span class="na">replaceAll</span><span class="o">(</span><span class="s2">&quot;/&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;-&quot;</span><span class="o">)</span>
<span class="w">    </span><span class="n">echo</span><span class="w"> </span><span class="n">env</span><span class="o">.</span><span class="na">DOCKER_BRANCH_NAME</span>
<span class="o">}</span>

<span class="kt">def</span><span class="w"> </span><span class="nf">buildReactFrontend</span><span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">stage</span><span class="o">(</span><span class="s2">&quot;React Frontend&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">dir</span><span class="o">(</span><span class="s2">&quot;frontend&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">            </span><span class="c1">// Ensure all Packages are Installed</span>
<span class="w">            </span><span class="n">sh</span><span class="w"> </span><span class="s2">&quot;npm install&quot;</span>

<span class="w">            </span><span class="c1">// Attempt to Resolve Reported Vulnerabilities</span>
<span class="w">            </span><span class="n">sh</span><span class="w"> </span><span class="s2">&quot;npm audit fix || true&quot;</span><span class="w"> </span><span class="c1">// Don&#39;t fail on normal warning</span>

<span class="w">            </span><span class="c1">// Use the Build Tooling</span>
<span class="w">            </span><span class="n">sh</span><span class="w"> </span><span class="s2">&quot;npm run build&quot;</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>

<span class="kt">def</span><span class="w"> </span><span class="nf">buildDockerContainer</span><span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">stage</span><span class="o">(</span><span class="s2">&quot;Docker Container&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>

<span class="w">        </span><span class="c1">// Check for &quot;Default&quot; Conditions</span>
<span class="w">        </span><span class="c1">// MAIN and DEVELOP Branches Should Have Consistent Ports</span>
<span class="w">        </span><span class="c1">// Their Containers Should Also Restart Automatically</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">(</span><span class="n">env</span><span class="o">.</span><span class="na">DOCKER_BRANCH_NAME</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;main&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">            </span><span class="n">env</span><span class="o">.</span><span class="na">NEXT_AVAIL_APP_PORT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;8000&quot;</span>
<span class="w">            </span><span class="n">env</span><span class="o">.</span><span class="na">RESTART_POLICY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;always&quot;</span>
<span class="w">        </span><span class="o">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="o">(</span><span class="n">env</span><span class="o">.</span><span class="na">DOCKER_BRANCH_NAME</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;develop&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">            </span><span class="n">env</span><span class="o">.</span><span class="na">NEXT_AVAIL_APP_PORT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;8001&quot;</span>
<span class="w">            </span><span class="n">env</span><span class="o">.</span><span class="na">RESTART_POLICY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;always&quot;</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">        </span><span class="n">echo</span><span class="w"> </span><span class="n">env</span><span class="o">.</span><span class="na">NEXT_AVAIL_APP_PORT</span>

<span class="w">        </span><span class="c1">// Provide credentials to the docker-compose script so that</span>
<span class="w">        </span><span class="c1">// container will reference the Lychee API credentials.</span>
<span class="w">        </span><span class="n">withCredentials</span><span class="o">([</span>
<span class="w">            </span><span class="n">usernamePassword</span><span class="o">(</span><span class="nl">credentialsId:</span><span class="w"> </span><span class="s1">&#39;idaho4hapi&#39;</span><span class="o">,</span>
<span class="w">            </span><span class="nl">usernameVariable:</span><span class="w"> </span><span class="s1">&#39;LYCHEE_API_USER&#39;</span><span class="o">,</span>
<span class="w">            </span><span class="nl">passwordVariable:</span><span class="w"> </span><span class="s1">&#39;LYCHEE_API_TOKEN&#39;</span><span class="o">)</span>
<span class="w">        </span><span class="o">])</span><span class="w"> </span><span class="o">{</span>
<span class="w">            </span><span class="c1">// Build the Container - Using the Branch-Name as Env Var</span>
<span class="w">            </span><span class="n">sh</span><span class="w"> </span><span class="s2">&quot;docker-compose up -d --build&quot;</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>

<span class="kt">def</span><span class="w"> </span><span class="nf">deployContainerInNginx</span><span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">stage</span><span class="o">(</span><span class="s2">&quot;Deploy in NGINX&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="c1">// Generate the NGINX Config File</span>
<span class="w">        </span><span class="n">sh</span><span class="w"> </span><span class="s2">&quot;python3 ./writeNginxConfig.py&quot;</span>

<span class="w">        </span><span class="c1">// Restart NGINX To Apply Config</span>
<span class="w">        </span><span class="n">sh</span><span class="w"> </span><span class="s2">&quot;sudo /usr/bin/systemctl restart nginx&quot;</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>

<span class="kt">def</span><span class="w"> </span><span class="nf">runPythonTestsInVirtualEnv</span><span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">stage</span><span class="o">(</span><span class="s2">&quot;Test Python&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="c1">// Install Requirements</span>
<span class="w">        </span><span class="n">sh</span><span class="w"> </span><span class="s2">&quot;&quot;&quot;python3 -m pip install -r ${WORKSPACE}/${requirementsFile}&quot;&quot;&quot;</span>

<span class="w">        </span><span class="c1">// Run `pytest`</span>
<span class="w">        </span><span class="n">sh</span><span class="w"> </span><span class="s2">&quot;pytest&quot;</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>
</code></pre></div>


</details>

<p>That means we spend MORE time on learning, and LESS time on fighting the system! In theory, at least...</p>
<p><img src="https://imgs.xkcd.com/comics/automation.png" style="width: 100%" alt="Woes of Automation"></p>
<blockquote>
<p><em>image credit: <a href="https://xkcd.com/1319/">XKCD comics</a></em></p>
</blockquote>
      </div>
    </article>
  </main>
<!-- <script data-isso="https://blogcomments.stanleysolutionsnw.com/" src="https://blogcomments.stanleysolutionsnw.com/js/embed.min.js"></script>
<section class="comments" id="comments">
    <h3 class="panel">Comments</h3>
        <section id="isso-thread"></section> -->
<script src="https://giscus.app/client.js"
        data-repo="engineerjoe440/stanley-solutions-blog"
        data-repo-id="MDEwOlJlcG9zaXRvcnkyODk0MDQ2ODE="
        data-category="Comments"
        data-category-id="DIC_kwDOET_3Cc4CTonj"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="dark"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>
</section>    </div>
  </div>

  <footer class="footer">
    <div class="container">
<div class="row">
  <ul class="col-sm-6 list-inline">
    <li class="list-inline-item"><a href="https://blog.stanleysolutionsnw.com/archives.html">Archives</a></li>
    <li class="list-inline-item"><a href="https://blog.stanleysolutionsnw.com/categories.html">Categories</a></li>
      <li class="list-inline-item"><a href="https://blog.stanleysolutionsnw.com/tags.html">Tags</a></li>
  </ul>
  <p class="col-sm-6 text-sm-right text-muted">
    Generated by <a href="https://github.com/getpelican/pelican" target="_blank">Pelican</a>
    / <a href="https://github.com/nairobilug/pelican-alchemy" target="_blank">&#x2728;</a>
  </p>
</div>    </div>
  </footer>

</body>

</html>