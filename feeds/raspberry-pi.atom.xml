<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Stanley Solutions Blog - Raspberry Pi</title><link href="https://blog.stanleysolutionsnw.com/" rel="alternate"></link><link href="https://blog.stanleysolutionsnw.com/feeds/raspberry-pi.atom.xml" rel="self"></link><id>https://blog.stanleysolutionsnw.com/</id><updated>2021-02-15T20:43:00-08:00</updated><subtitle>engineering and creativity - all under one hat</subtitle><entry><title>Spam the VBAN for Non-Stop Audio</title><link href="https://blog.stanleysolutionsnw.com/spam-the-vban-for-non-stop-audio.html" rel="alternate"></link><published>2021-02-15T20:22:00-08:00</published><updated>2021-02-15T20:43:00-08:00</updated><author><name>Joe Stanley</name></author><id>tag:blog.stanleysolutionsnw.com,2021-02-15:/spam-the-vban-for-non-stop-audio.html</id><summary type="html">&lt;p class="first last"&gt;When things get sticky, leave it to Python to keep the wheels greased!&lt;/p&gt;
</summary><content type="html">&lt;p&gt;In a &lt;a class="reference external" href="https://blog.stanleysolutionsnw.com/networked-audio-using-vban-and-rpi.html"&gt;recent article&lt;/a&gt; I wrote about how I'd started to integrate more of my house's
audio system with a networked audio protocol known as &amp;quot;VBAN&amp;quot;. I'd gotten some great
use out of the system, but I'd started running into some problems more recently...&lt;/p&gt;
&lt;p&gt;You see, for some reason, if I were streaming some audio to my Raspberry Pi, and the
stream dropped into a lull (i.e. between songs, say) I'd often see some pretty nasty
buffer errors from Alsa. Now, I could've dug into it much deeper and tried to get to
the root of the problem in &lt;cite&gt;C&lt;/cite&gt;, but I didn't really feel like it. Instead, I thought
I'd just throw some Python at it! So after spending an intermittent afternoon
reminding myself how the &lt;cite&gt;subprocess&lt;/cite&gt; module works, and debugging my own madness, I
got a working script that I use as a &lt;em&gt;systemd&lt;/em&gt; service.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# VBAN Receiver in Python&lt;/span&gt;

&lt;span class="c1"&gt;# Imports&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;subprocess&lt;/span&gt;

&lt;span class="c1"&gt;# Executor Function&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cmd&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;popen&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Popen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cmd&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;stdout&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PIPE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                             &lt;span class="n"&gt;stderr&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;STDOUT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;universal_newlines&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;stdout_line&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;iter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;popen&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stdout&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;readline&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="k"&gt;yield&lt;/span&gt; &lt;span class="n"&gt;stdout_line&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;popen&lt;/span&gt;
    &lt;span class="n"&gt;popen&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stdout&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;return_code&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;popen&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;wait&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;return_code&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;raise&lt;/span&gt; &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CalledProcessError&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;return_code&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cmd&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Define Attributes&lt;/span&gt;
&lt;span class="n"&gt;MASTER_PC_IP&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;lt;your-ip-here&amp;gt;&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;LOG_FILE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;/var/vban_log.log&amp;#39;&lt;/span&gt;

&lt;span class="c1"&gt;# Define Command and Args&lt;/span&gt;
&lt;span class="n"&gt;EXECUTABLE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;/usr/local/bin/vban_receptor&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;ARGS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;-i&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;MASTER_PC_IP&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;-p&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;6980&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;-s&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;StereoPi&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;-d&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;front&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;-q&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;0&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="n"&gt;CALL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;EXECUTABLE&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;CALL&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;extend&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ARGS&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Call the System&lt;/span&gt;
&lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LOG_FILE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;a&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;logFile&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;proc_handle&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;execute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CALL&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;end&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;logFile&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="c1"&gt;# Catch Error&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Error: alsa_write:&amp;quot;&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Failure... Python intervening!&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="n"&gt;proc_handle&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;kill&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
                &lt;span class="n"&gt;proc_handle&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;wait&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt; &lt;span class="c1"&gt;# Continue While Loop - Call Again&lt;/span&gt;
&lt;span class="c1"&gt;# END&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;With that magic little Python script, I basically kick VBAN in the butt every time
that Alsa decides to be unfriendly (which happens quite regularly) by killing the
process, and then starting it right back up. With the magic of computers, this
happens very fast, and as I'd briefly mentioned earlier, it only seems to really
play into the &amp;quot;mix&amp;quot; in-between songs anyway. So after building the script, giving
it a nice little test drive, and scrutinizing my Raspberry Pi; I thought it was
time to build it back into my simple little service.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# /etc/systemd/system/vbanstereorx.service&lt;/span&gt;
&lt;span class="c1"&gt;# vbanstereorx.service&lt;/span&gt;
&lt;span class="c1"&gt;# VBAN Receptor Stereo Service&lt;/span&gt;

&lt;span class="k"&gt;[Unit]&lt;/span&gt;
&lt;span class="na"&gt;Description&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;VBAN Stereo Receptor&lt;/span&gt;

&lt;span class="k"&gt;[Service]&lt;/span&gt;
&lt;span class="na"&gt;Type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;simple&lt;/span&gt;
&lt;span class="na"&gt;ExecStart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;/usr/bin/python3 /home/vbanner.py&lt;/span&gt;
&lt;span class="na"&gt;Restart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;always&lt;/span&gt;

&lt;span class="k"&gt;[Install]&lt;/span&gt;
&lt;span class="na"&gt;WantedBy&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;multi-user.target&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I'm sure I'll be back to crack the hood back open on this one at some point, but
for now, I'm happy to stream my music back to my cabinet stereo with the power of
Linux.&lt;/p&gt;
</content><category term="Raspberry Pi"></category><category term="vban"></category><category term="audio network"></category><category term="raspberry pi"></category><category term="python"></category><category term="linux"></category></entry><entry><title>Synchronizing Home Audio with the Raspberry Pi and VBAN</title><link href="https://blog.stanleysolutionsnw.com/networked-audio-using-vban-and-rpi.html" rel="alternate"></link><published>2020-12-19T19:44:00-08:00</published><updated>2020-12-19T19:44:00-08:00</updated><author><name>Joe Stanley</name></author><id>tag:blog.stanleysolutionsnw.com,2020-12-19:/networked-audio-using-vban-and-rpi.html</id><summary type="html">&lt;p class="first last"&gt;Ever wish your music was synchronized across your home, but you didn't have to sell your soul to Google to make it happen? Well, I did it with a Raspberry Pi and a nifty little open-source project!&lt;/p&gt;
</summary><content type="html">&lt;p&gt;I'm something of an audiophile.&lt;/p&gt;
&lt;p&gt;Not completely, mind you, just partly.&lt;/p&gt;
&lt;p&gt;Why partly? Well, I love audio! Anymore, I don't really watch television, or movies; but I listen
to audiobooks, podcasts, music, and more all the time! I like to listen everywhere. Home, work,
while driving. EVERYWHERE. And I like to have my audio follow me around all the time. In other
words, I like having the same music in my study as what's in my living room, kitchen, bathroom,
bedroom... EVERYWHERE.&lt;/p&gt;
&lt;p&gt;I'd say that I enjoy quality HiFi audio, but I'm not the pickiest out there. My kitchen, for
example has some pretty crude audio since I bought a pretty cheap stereo reciever and just
sorta threw it together. Still, I enjoy it. It gives me audio when I'm cooking, cleaning, or just
hanging out; and for me, that's the most important part.&lt;/p&gt;
&lt;p&gt;When I bought my home, I decided that I was going to install an &amp;quot;Audio Bus&amp;quot; to allow bi-directional
audio transportation. I've since started on the project, but I've run out of speaker cable, and
considering the crazy holiday spending, I've put on the brakes for the moment on my &amp;quot;personal&amp;quot;
spending. That means that I've only been able to hard-wire a connection between the kitchen and
my study. But I &lt;em&gt;really&lt;/em&gt; want more.&lt;/p&gt;
&lt;div class="section" id="my-solution"&gt;
&lt;h2&gt;My Solution&lt;/h2&gt;
&lt;p&gt;Enter &lt;a class="reference external" href="https://vb-audio.com/Voicemeeter/vban.htm"&gt;VB Audio Network&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;VBAN is a UDP-based network audio streaming protocol that was developed by the same individual
who created the &lt;a class="reference external" href="https://vb-audio.com/Voicemeeter/banana.htm"&gt;Banana&lt;/a&gt; audio mixer which I've come to love for my desktop audio mixing desires.
It's essentially a networked audio system, allowing streaming audio transmission and reception,
and it's officially supported on Windows, Android, and iOS; and community-supported on Linux!&lt;/p&gt;
&lt;p&gt;That's right, it's available on Linux, and it's fully open-source as &lt;a class="reference external" href="https://github.com/quiniouben/vban"&gt;vban&lt;/a&gt; where it's
accessible as a command-line-based reciever or transmitter.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="my-process"&gt;
&lt;h2&gt;My Process&lt;/h2&gt;
&lt;p&gt;So... Late last night, after a long day of work, I decided I wasn't done programming, so I
started in on this project. I took an old Raspberry Pi that I'd already mounted in my
vintage Zenith cabinet stereo (that's a story for another day, and I'll have to tell you about
it!) and I began preparing it. Somehow, I'd ruined the SD card, so I chucked the original SD and
flashed a new one with the latest build of RaspberryOS. After I had the card flashed, I dropped
an empty file titled 'ssh' in the &lt;cite&gt;/boot&lt;/cite&gt; directory so that it would enable SSH on initial boot.&lt;/p&gt;
&lt;p&gt;Now, with SSH set up, and my new SD card plugged into the Pi, I powered it up and connected
remotely; updating the system with &lt;cite&gt;sudo apt-get update&lt;/cite&gt; and &lt;cite&gt;sudo apt-get upgrade -y&lt;/cite&gt; I had a
fresh install ready for my experimentation!&lt;/p&gt;
&lt;p&gt;Now, for the benefit of new tinkerers interested in VBAN setup on a Pi (and a way to jog my own
terrible memory sometime in the future), I'll try to illustrate the remaining steps as best I can
remember. I had to play with some trial and error, so I'm reordering some steps to make it more
clear and straight-forward, but I'll comment on some of the &amp;quot;hardships&amp;quot; I had after we get through
all of the steps. My process was centered around the installation instructions on the &lt;a class="reference external" href="https://github.com/quiniouben/vban"&gt;vban&lt;/a&gt;
project README, but I did deviate a little to get it working.&lt;/p&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;After preparing my &amp;quot;fresh install,&amp;quot; I went ahead and installed the Raspberry Pi and Alsa
headers so that they'd show up for the installation.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;apt-get&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;raspberrypi-kernel-headers
&lt;span class="gp"&gt;$&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;apt-get&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;libasound-dev
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;With my new headers installed, I was ready to clone the git repo and build it. I guess that at
this point, I &lt;em&gt;should&lt;/em&gt; mention that I'd previously installed git, but I suppose you might have
been able to infer that on your own. Anyway, I cloned the repo to my home folder:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;git&lt;span class="w"&gt; &lt;/span&gt;clone&lt;span class="w"&gt; &lt;/span&gt;https://github.com/quiniouben/vban.git
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Now, I moved myself into that new directory with: &lt;cite&gt;cd vban&lt;/cite&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Before I could build the &lt;cite&gt;vban&lt;/cite&gt; system by following the instructions on the GitHub repo, I
needed to install the &lt;cite&gt;autoconf&lt;/cite&gt; tools so that the autoconfiguration scripts would function.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;apt-get&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;autotools-dev
&lt;span class="gp"&gt;$&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;apt-get&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;autoconf
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;I then went ahead and followed the installation instructions from the &lt;cite&gt;vban&lt;/cite&gt; project README,
substituting a few extra arguments to satisfy the system requirements (Alsa only, no Pulse/Jack).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;./autogen.sh
&lt;span class="gp"&gt;$&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;./configure&lt;span class="w"&gt; &lt;/span&gt;--enable-alsa&lt;span class="w"&gt; &lt;/span&gt;--disable-pulseaudio&lt;span class="w"&gt; &lt;/span&gt;--disable-jack&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="c1"&gt;# Only using Alsa&lt;/span&gt;
&lt;span class="gp"&gt;$&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;make
&lt;span class="gp"&gt;$&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;make&lt;span class="w"&gt; &lt;/span&gt;install
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;After I got all of that working, I was able to set up my Windows desktop running Banana Mixer
to stream to my Raspberry Pi using VBAN. I configured VBAN on my desktop to stream as such:&lt;/p&gt;
&lt;img alt="Windows VBAN server configuration." src="https://blog.stanleysolutionsnw.com/vban_desktop.png" style="width: 800px;" /&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Then, I could simply issue the following command in my Raspberry Pi to start listening!&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;vban_receptor&lt;span class="w"&gt; &lt;/span&gt;-i&lt;span class="w"&gt; &lt;/span&gt;&amp;lt;my-desktop-ip&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;-p&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;6980&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-s&lt;span class="w"&gt; &lt;/span&gt;StereoPi&lt;span class="w"&gt; &lt;/span&gt;-d&lt;span class="w"&gt; &lt;/span&gt;front&lt;span class="w"&gt; &lt;/span&gt;-q&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This meant that I'd listen for a stream of name &amp;quot;StereoPi&amp;quot; from my desktop with it's specific
IP address on port 6980. I'd then stream that audio to the &amp;quot;front&amp;quot; output in my Alsa config,
and (since this is a hard-wired Ethernet connection) I set the highest quality to reduce delay.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Viola! I've now begun sharing audio between my desktop and the Raspberry Pi!&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="another-dilemma"&gt;
&lt;h2&gt;Another Dilemma&lt;/h2&gt;
&lt;p&gt;Ah, but we weren't done yet! See, that command is blocking, meaning that if I close my SSH
connection, say good bye to audio! Drat!&lt;/p&gt;
&lt;p&gt;I decided that to fix this, I'd write a little systemd service, and keep it disabled, so that
I could start and stop it easily enough (so if I want to use other audio services, they won't
clash too terribly).&lt;/p&gt;
&lt;p&gt;So I wrote this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# vbanstereorx.service&lt;/span&gt;
&lt;span class="c1"&gt;# VBAN Receptor Stereo Service&lt;/span&gt;

&lt;span class="k"&gt;[Unit]&lt;/span&gt;
&lt;span class="na"&gt;Description&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;VBAN Stereo Receptor&lt;/span&gt;

&lt;span class="k"&gt;[Service]&lt;/span&gt;
&lt;span class="na"&gt;Type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;simple&lt;/span&gt;
&lt;span class="na"&gt;ExecStart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;/usr/local/bin/vban_receptor  -i &amp;lt;my-desktop-ip&amp;gt; -p 6980 -s StereoPi -d front -q 0&lt;/span&gt;

&lt;span class="k"&gt;[Install]&lt;/span&gt;
&lt;span class="na"&gt;WantedBy&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;multi-user.target&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Then simply &amp;quot;installed&amp;quot; it with the following command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;cp&lt;span class="w"&gt; &lt;/span&gt;vbanstereorx.service&lt;span class="w"&gt; &lt;/span&gt;/etc/systemd/system/vbanstereorx.service
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now, I can just start or stop the reciever by issuing &lt;cite&gt;sudo systemctl start vbanstereorx&lt;/cite&gt; or
&lt;cite&gt;sudo systemctl stop vbanstereeorx&lt;/cite&gt;, respectively!&lt;/p&gt;
&lt;div class="section" id="the-other-challenges"&gt;
&lt;h3&gt;The Other Challenges&lt;/h3&gt;
&lt;p&gt;I'm afraid it all wasn't easy-peasy, and setup smooth; there were still a few hiccups.&lt;/p&gt;
&lt;p&gt;Right now, the biggest thing is that I believe Alsa is on its way out for the Raspberry
Pi, so I have a feeling that I'm gonna need to reform this at some point, but perhaps
that's just for the Pi4 for the time being? I'm not really sure... Anyone who might know,
&lt;a class="reference external" href="mailto:engineerjoe440&amp;#64;yahoo.com"&gt;hit me up&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The other issue that I ran into during installation was the use of autoconfig scripts and
RPi/Alsa headers. Since they weren't &lt;em&gt;explicitly&lt;/em&gt; called out as installation requisites,
I bumped into them, and had to take to Googling my way out of a corner. Wasn't bad, just
slowed me down.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="what-s-next"&gt;
&lt;h2&gt;What's next?&lt;/h2&gt;
&lt;p&gt;I'll have to save that for another post; another day. Just keep your eyes peeled!&lt;/p&gt;
&lt;/div&gt;
</content><category term="Raspberry Pi"></category><category term="raspberrypi"></category><category term="vban"></category><category term="audio"></category><category term="networking"></category><category term="music"></category><category term="home-automation"></category></entry></feed>